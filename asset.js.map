{"version":3,"file":"asset.d45eec1fe2bae86ea59a.js","sources":["webpack:///asset.d45eec1fe2bae86ea59a.js"],"sourcesContent":["(this.webpackJsonp=this.webpackJsonp||[]).push([[19],{1994:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(339),o=a(44),l=a(47),i=a(9),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function m(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function d(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){p(this,t);var e=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getDynamicObject=e.getDynamicObject.bind(e),e}return d(t,r.a.Component),u(t,[{key:\"getDynamicObject\",value:function(e){return this.props.dos.find(function(t){return t&&t.get(\"id\")===e})}},{key:\"render\",value:function(){return r.a.cloneElement(r.a.Children.only(this.props.children),c({},this.props,{getDynamicObject:this.getDynamicObject}))}}]),t}();h.propTypes={dos:o.a.ChainObjectsList},h.defaultProps={dos:Object(i.List)()},h=Object(l.a)(h);var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.propNames=t.propNames||[t.asList?\"assets\":\"asset\"];var a=t.propNames.reduce(function(e,a){return e[a]=t.asList?o.a.ChainAssetsList:o.a.ChainAsset.isRequired,e},{}),n=Object.keys(a).reduce(function(e,a){var n=t.defaultProps&&t.defaultProps[a];return e[a]=t.asList?Object(i.List)(n||[]):n||\"1.3.0\",e},{});t.defaultProps&&t.defaultProps.tempComponent&&(n.tempComponent=t.defaultProps.tempComponent);var f=function(e){function a(){return p(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return d(a,r.a.Component),u(a,[{key:\"render\",value:function(){var e=this,a={},n={},s=Object(i.List)();Object.keys(this.props).forEach(function(r){e.props[r]&&-1!==t.propNames.indexOf(r)?(t.withDynamic&&(t.asList?e.props[r].forEach(function(e){e&&(s=s.push(e.get(\"dynamic_asset_data_id\")))}):s=s.push(e.props[r].get(\"dynamic_asset_data_id\"))),a[r]=t.asList?e.props[r].filter(function(e){return!!e}):e.props[r]):n[r]=e.props[r]});var o=r.a.cloneElement(r.a.Children.only(this.props.children),c({},n,a));return t.withDynamic?r.a.createElement(h,{dos:s},o):o}}]),a}();f.propTypes=a,f.defaultProps=n,f=Object(l.a)(f);var b=function(t){function a(){return p(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return d(a,r.a.Component),u(a,[{key:\"render\",value:function(){return r.a.createElement(f,this.props,r.a.createElement(e,{ref:\"bound_component\"}))}}]),a}();return b.displayName=\"Wrapper(\"+Object(s.a)(e)+\")\",b},b=a(1),_=a.n(b),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function v(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function k(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(e){y(this,t);var a=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={imgError:!1},a}return k(t,r.a.Component),E(t,[{key:\"shouldComponentUpdate\",value:function(e,t){return this.props.asset!==e.asset||this.props.maxWidth!==e.maxWidth||this.props.whiteList!==e.whiteList||this.state.imgError!==t.imgError}},{key:\"_onError\",value:function(e){this.state.imgError||(this.props.replaceNoneToBts?this.refs[e.toLowerCase()].src=\"/asset-symbols/bts.png\":this.refs[e.toLowerCase()].remove(),this.setState({imgError:!0}))}},{key:\"render\",value:function(){var e=function(e){return e.get(\"symbol\")}(this.props.asset);return r.a.createElement(\"img\",{ref:e.toLowerCase(),className:\"column-hide-small\",onError:this._onError.bind(this,e),style:{maxWidth:this.props.maxWidth,marginRight:5},src:\"/asset-symbols/\"+e.toLowerCase()+\".png\"})}}]),t}();w.propTypes={replaceNoneToBts:_.a.bool,maxWidth:_.a.number},w.defaultProps={replaceNoneToBts:!0,maxWidth:20},w=f(w);var x=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,r.a.Component),E(t,[{key:\"render\",value:function(){return r.a.createElement(w,g({},this.props,{asset:this.props.name}))}}]),t}();t.a=x},1995:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(2),o=a.n(s),l=a(36),i=a(1998),c=a(9),u=a.n(c),p=a(5),m=a.n(p),d=a(124),h=a(16),f=a(1),b=a.n(f),_=a(282),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function E(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function v(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(){return E(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,r.a.Component),g(t,[{key:\"shouldComponentUpdate\",value:function(e){return!h.a.are_equal_shallow(e.assets,this.props.assets)||e.value!==this.props.value||e.scroll_length!==this.props.scroll_length}},{key:\"render\",value:function(){return this.props.assets.length?r.a.createElement(i.a,{entries:this.props.assets.map(function(e){return e&&e.get(\"symbol\")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get(\"symbol\")&&(e[t.get(\"symbol\")]=t),e},{}),singleEntry:this.props.assets[0]?r.a.createElement(l.a,{asset:this.props.assets[0].get(\"id\"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange,scroll_length:this.props.scroll_length}):null}}]),t}();k.propTypes={value:b.a.string,onChange:b.a.func,scroll_length:b.a.number},k=Object(d.a)(k,{asList:!0});var w=function(e){function t(){return E(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,_[\"a\"]),g(t,[{key:\"componentDidMount\",value:function(){this.onAssetChange(this.props.asset)}},{key:\"formatAmount\",value:function(e){return e||(e=\"\"),\"number\"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,\"\")}},{key:\"_onChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.getNumericEventValue(e),asset:this.props.asset})}},{key:\"onAssetChange\",value:function(e){this.props.onChange&&this.props.onChange({amount:this.props.amount,asset:e})}},{key:\"render\",value:function(){var e=this.props.error?m.a.translate(this.props.error):this.formatAmount(this.props.amount);return r.a.createElement(\"div\",{className:\"amount-selector\",style:this.props.style},r.a.createElement(\"label\",{className:\"right-label\"},this.props.display_balance),r.a.createElement(o.a,{className:\"left-label\",component:\"label\",content:this.props.label}),r.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},r.a.createElement(\"input\",{disabled:this.props.disabled,type:\"text\",value:e||\"\",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,onPaste:this.props.onPaste||this.onPaste.bind(this),onKeyPress:this.onKeyPress.bind(this)}),r.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},this.props.isPrice?r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},r.a.createElement(\"div\",null,this.props.asset.get(\"symbol\"),\"/\",this.props.base)):r.a.createElement(k,{ref:this.props.refCallback,value:this.props.asset.get(\"symbol\"),assets:u.a.List(this.props.assets),onChange:this.onAssetChange.bind(this),scroll_length:this.props.scroll_length}))))}}]),t}();w.propTypes={label:b.a.string,assets:b.a.array,amount:b.a.any,placeholder:b.a.string,onChange:b.a.func,tabIndex:b.a.number,error:b.a.string,scroll_length:b.a.number},w.defaultProps={disabled:!1,tabIndex:0},w=Object(d.a)(w),t.a=w},1998:function(e,t,a){\"use strict\";var n=a(0),r=a.n(n),s=a(16),o=a(1),l=a.n(o),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);e.scroll_length;var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={active:!1},a.listener=!1,a.onBodyClick=a.onBodyClick.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),i(t,[{key:\"componentDidMount\",value:function(){this._setListener()}},{key:\"shouldComponentUpdate\",value:function(e,t){return!s.a.are_equal_shallow(e.entries,this.props.entries)||!s.a.are_equal_shallow(t,this.state)||e.value!==this.props.value}},{key:\"_setListener\",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).entries.length>1&&!this.listener&&(this.listener=!0,document.body.addEventListener(\"click\",this.onBodyClick,{capture:!1,passive:!0}))}},{key:\"_removeListener\",value:function(){document.body.removeEventListener(\"click\",this.onBodyClick),this.listener=!1}},{key:\"componentWillReceiveProps\",value:function(e){1===e.entries.length?this._removeListener():e.entries.length>1&&this._setListener(e)}},{key:\"componentWillUnmount\",value:function(){this._removeListener()}},{key:\"onBodyClick\",value:function(e){var t=e.target,a=!1;do{if(t.classList&&t.classList.contains(\"dropdown\")&&t.id===this.props.id){a=!0;break}}while(t=t.parentNode);a?e.stopPropagation():this.setState({active:!1})}},{key:\"onChange\",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onChange(e),this.setState({active:!1})}},{key:\"_toggleDropdown\",value:function(){this.setState({active:!this.state.active})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.entries,n=t.value,s=this.state.active;if(0===a.length)return null;if(1==a.length)return r.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"+(this.props.upperCase?\" upper-case\":\"\")},r.a.createElement(\"div\",null,this.props.singleEntry?this.props.singleEntry:a[0]));var o=a.map(function(t){return r.a.createElement(\"li\",{className:e.props.upperCase?\"upper-case\":\"\",key:t,onClick:e.onChange.bind(e,e.props.values[t])},r.a.createElement(\"span\",null,t))});return r.a.createElement(\"div\",{onClick:this._toggleDropdown.bind(this),className:\"dropdown-wrapper\"+(s?\" active\":\"\")+(this.props.upperCase?\" upper-case\":\"\")},r.a.createElement(\"div\",{style:{paddingRight:15}},n||r.a.createElement(\"span\",{className:\"hidden\"},\"A\")),r.a.createElement(\"ul\",{className:\"dropdown\",style:{overflow:a.length>this.props.scroll_length?\"auto\":\"hidden\"}},o))}}]),t}();c.propTypes={scroll_length:l.a.number},c.defaultProps={scroll_length:9},t.a=c},2253:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),s=a(2239),o=a(2),l=a.n(o),i=a(126),c=a(181),u=a(124),p=a(36),m=a(134),d=a(1994),h=a(97),f=a(596),b=a(594),_=a(110),g=a(16),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={time:e.time},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),E(t,[{key:\"getHours\",value:function(e){return e/3600}},{key:\"render\",value:function(){return r.a.createElement(\"div\",null,this.getHours(this.state.time),\"h\")}}]),t}(),v=a(6),k=a(15),w=a(40),x=a(600),P=a(3),C=a.n(P),O=a(280),A=a(1995),j=a(474),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(n){return e.setState(T({},t,a(n)))}},F=function(e){return function(t){return t[e]}},I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onAccountNameChanged=N(a,\"funderAccountName\"),a.onAccountChanged=N(a,\"newFunderAccount\"),a.onPoolInput=N(a,\"fundPoolAmount\",F(\"amount\")),a.onFundPool=function(){return j.a.fundPool(a.state.newFunderAccount?a.state.newFunderAccount.get(\"id\"):null,a.props.core,a.props.asset,a.state.fundPoolAmount.replace(/,/g,\"\"))},a.reset=function(){a.setState(a.initialState())},a.initialState=function(){return{funderAccountName:a.props.funderAccountName,fundPoolAmount:0,fundPoolAsset:new w.a({amount:0,precision:a.props.core.get(\"precision\"),asset_id:a.props.core.get(\"id\")}),claimPoolAmount:0,claimPoolAmountAsset:new w.a({amount:0,precision:a.props.core.get(\"precision\"),asset_id:a.props.core.get(\"id\")}),claimFeesAmount:0,claimFeesAmountAsset:new w.a({amount:0,precision:a.props.asset.get(\"precision\"),asset_id:a.props.asset.get(\"id\")})}},a.onClaimPool=function(){return j.a.claimPool(a.props.asset,a.state.claimPoolAmountAsset)},a.state=a.initialState(),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),S(t,[{key:\"onClaimInput\",value:function(e,t){var a=t.amount;this.state[e+\"Asset\"].setAmount({real:a}),this.setState(T({},e,a))}},{key:\"onClaimFees\",value:function(){var e=v.ChainStore.getAccount(this.props.funderAccountName);e&&j.a.claimPoolFees(e.get(\"id\"),this.props.asset,this.state.claimFeesAmountAsset)}},{key:\"renderFundPool\",value:function(){var e=this.props,t=this.state,a=this.onPoolInput,n=this.onFundPool,s=this.reset,o=this.onAccountNameChanged,i=this.onAccountChanged,c=e.asset,u=e.core,m=e.hideBalance,d=e.getDynamicObject,h=t.funderAccountName,f=t.fundPoolAmount,b=t.newFunderAccount,_=null;m||(_=d(c.get(\"dynamic_asset_data_id\")));var g=u.get(\"id\")||\"1.3.0\",E=0;if(b){var y=b.getIn([\"balances\",g]);if(y){var k=v.ChainStore.getObject(y);k&&(E=k.get(\"balance\"))}}var w=r.a.createElement(\"span\",null,r.a.createElement(l.a,{component:\"span\",content:\"transfer.available\"}),\": \",r.a.createElement(p.a,{amount:E,asset:g}));return r.a.createElement(\"div\",null,m||r.a.createElement(\"div\",{style:{paddingBottom:\"1.5rem\"}},r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.pool_balance\"}),r.a.createElement(\"span\",null,\": \"),_?r.a.createElement(p.a,{amount:_.get(\"fee_pool\"),asset:g}):null),r.a.createElement(O.a,{label:\"transaction.funding_account\",accountName:h,onChange:o,onAccountChanged:i,account:h,error:null,tabIndex:1}),r.a.createElement(A.a,{label:\"transfer.amount\",display_balance:w,amount:f,onChange:a,asset:g,assets:[g],placeholder:\"0.0\",tabIndex:2,style:{width:\"100%\",paddingTop:16}}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\",{disabled:f<=0}),onClick:n},r.a.createElement(l.a,{content:\"transaction.trxTypes.asset_fund_fee_pool\"})),r.a.createElement(\"button\",{className:\"button outline\",onClick:s},r.a.createElement(l.a,{content:\"account.perm.reset\"}))))}},{key:\"renderClaimPool\",value:function(){var e=this,t=this.props,a=this.onClaimPool,n=this.reset,s=this.state.claimPoolAmount,o=t.asset,i=t.core,c=(0,t.getDynamicObject)(o.get(\"dynamic_asset_data_id\")),u=i.get(\"id\")||\"1.3.0\",m=c?r.a.createElement(\"span\",{onClick:function(){e.state.claimPoolAmountAsset.setAmount({sats:c.get(\"fee_pool\")}),e.setState({claimPoolAmount:e.state.claimPoolAmountAsset.getAmount({real:!0})})}},r.a.createElement(l.a,{component:\"span\",content:\"transfer.available\"}),\": \",r.a.createElement(p.a,{amount:c.get(\"fee_pool\"),asset:u})):null;return r.a.createElement(\"div\",null,r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.fee_pool.claim_pool_text\"}),r.a.createElement(A.a,{label:\"transfer.amount\",display_balance:m,amount:s,onChange:this.onClaimInput.bind(this,\"claimPoolAmount\"),asset:u,assets:[u],placeholder:\"0.0\",tabIndex:2,style:{width:\"100%\",paddingTop:16}}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\",{disabled:s<=0}),onClick:a},r.a.createElement(l.a,{content:\"transaction.trxTypes.asset_claim_fee_pool\"})),r.a.createElement(\"button\",{className:\"button outline\",onClick:n},r.a.createElement(l.a,{content:\"account.perm.reset\"}))))}},{key:\"renderClaimFees\",value:function(){var e=this.props,t=this.state.claimFeesAmount,a=e.asset,n=(0,e.getDynamicObject)(a.get(\"dynamic_asset_data_id\")),s=n?n.get(\"accumulated_fees\"):0,o=t>0&&this.state.claimFeesAmountAsset.getAmount()<=s,i=r.a.createElement(\"span\",null,r.a.createElement(l.a,{component:\"span\",content:\"transfer.available\"}),\": \",r.a.createElement(p.a,{amount:s,asset:a.get(\"id\")}));return r.a.createElement(\"div\",null,r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.fee_pool.claim_text\",asset:a.get(\"symbol\")}),r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"}},r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.unclaimed_issuer_income\"}),\": \",n?r.a.createElement(p.a,{amount:n.get(\"accumulated_fees\"),asset:a.get(\"id\")}):null),r.a.createElement(A.a,{label:\"transfer.amount\",display_balance:i,amount:t,onChange:this.onClaimInput.bind(this,\"claimFeesAmount\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingTop:16}}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\",{disabled:!o}),onClick:this.onClaimFees.bind(this)},r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.claim_fees\"})),r.a.createElement(\"button\",{className:\"button outline\",onClick:this.reset.bind(this)},r.a.createElement(l.a,{content:\"account.perm.reset\"}))))}},{key:\"render\",value:function(){return\"fund\"===this.props.type?this.renderFundPool():\"claim\"===this.props.type?this.renderClaimPool():\"claim_fees\"===this.props.type?this.renderClaimFees():void 0}}]),t}();I.defaultProps={type:\"fund\"};var R=I=Object(u.a)(I,{propNames:[\"asset\",\"core\"],defaultProps:{core:\"1.3.0\"},withDynamic:!0}),q=a(23),B=a(30),D=a(5),L=a.n(D),z=a(44),M=a(47),J=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={new_issuer_account_id:null,issuer_account_name:null},e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),J(t,[{key:\"onAccountNameChanged\",value:function(e,t){this.setState(W({},e,t))}},{key:\"onAccountChanged\",value:function(e,t){this.setState(W({},e,t?t.get(\"id\"):null))}},{key:\"onSubmit\",value:function(){var e=this;j.a.updateOwner(this.props.asset,this.state.new_issuer_account_id).then(function(){e.onReset()})}},{key:\"onReset\",value:function(){this.setState({new_issuer_account_id:null,issuer_account_name:null})}},{key:\"render\",value:function(){var e=this.props.currentOwner;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"}},r.a.createElement(O.a,{label:\"account.user_issued_assets.current_issuer\",accountName:e.get(\"name\"),account:e.get(\"name\"),error:null,tabIndex:1,disabled:!0})),r.a.createElement(O.a,{label:\"account.user_issued_assets.new_issuer\",accountName:this.state.issuer_account_name,onChange:this.onAccountNameChanged.bind(this,\"issuer_account_name\"),onAccountChanged:this.onAccountChanged.bind(this,\"new_issuer_account_id\"),account:this.state.issuer_account_name,error:null,tabIndex:1,typeahead:!0,excludeAccounts:[e.get(\"name\")]}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\",{disabled:!this.state.new_issuer_account_id}),onClick:this.onSubmit.bind(this)},r.a.createElement(l.a,{content:\"account.user_issued_assets.update_owner\"})),r.a.createElement(\"button\",{className:\"button outline\",onClick:this.onReset.bind(this)},r.a.createElement(l.a,{content:\"account.perm.reset\"}))))}}]),t}();G.propTypes={account:z.a.ChainAccount.isRequired,currentOwner:z.a.ChainAccount.isRequired};var U=G=Object(M.a)(G),V=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var K=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new w.a({amount:0,asset_id:e.quote.get(\"id\"),precision:e.quote.get(\"precision\")}),r=new w.a({amount:0,asset_id:e.base.get(\"id\"),precision:e.base.get(\"precision\")}),s=new w.i({quote:n,base:r});return a.state={price:s,realPriceValue:s.toReal()},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),V(t,[{key:\"onPriceChanged\",value:function(e){var t=e.amount;this.state.price.setPriceFromReal(parseFloat(t)),this.setState({realPriceValue:t}),this.props.onPriceChanged&&this.props.onPriceChanged(this.state.price.clone())}},{key:\"render\",value:function(){var e=this.state,t=e.realPriceValue,a=e.price;return r.a.createElement(A.a,{label:this.props.label,amount:t,onChange:this.onPriceChanged.bind(this),asset:a.base.asset_id,base:this.props.quote.get(\"symbol\"),isPrice:!0,assets:[a.quote.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"}})}}]),t}(),H=K=Object(u.a)(K,{propNames:[\"quote\",\"base\"],defaultProps:{base:\"1.3.0\"}}),Z=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var X=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a.resetState(e),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),Z(t,[{key:\"resetState\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.account.get(\"id\"),a=e.asset.getIn([\"bitasset\",\"current_feed\"]),n=a.get(\"maintenance_collateral_ratio\",1750),r=a.get(\"maximum_short_squeeze_ratio\",1100);return{publisher:e.account.get(\"name\"),publisher_id:t,mcr:n,mcrValue:n/1e3,mssr:r,mssrValue:r/1e3}}},{key:\"onAccountNameChanged\",value:function(e,t){this.setState(Q({},e,t))}},{key:\"onAccountChanged\",value:function(e,t){this.setState(Q({},e,t?t.get(\"id\"):null))}},{key:\"onSubmit\",value:function(){j.a.publishFeed({publisher:this.state.publisher_id,asset_id:this.props.asset.get(\"id\"),mcr:this.state.mcr,mssr:this.state.mssr,feedPrice:this.state.feedPrice,cer:this.state.cer})}},{key:\"onPriceChanged\",value:function(e,t){this.setState(Q({},e,t))}},{key:\"onSetRatio\",value:function(e,t){var a,n=t.amount;n&&\"string\"==typeof n&&-1!==n.indexOf(\".\")&&n.indexOf(\".\")+4!==n.length&&(n=n.substr(0,n.indexOf(\".\")+4)),this.setState((Q(a={},e+\"Value\",n),Q(a,e,Math.floor(1e3*parseFloat(n))),a))}},{key:\"render\",value:function(){var e=this.props.asset,t=this.state,a=t.mcrValue,n=t.mssrValue,s=t.publisher,o=e.get(\"id\"),i=e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]);return r.a.createElement(\"div\",null,r.a.createElement(O.a,{label:\"explorer.asset.feed_producer\",accountName:s,onChange:this.onAccountNameChanged.bind(this,\"publisher\"),onAccountChanged:this.onAccountChanged.bind(this,\"publisher_id\"),account:s,error:null,tabIndex:1,typeahead:!0}),r.a.createElement(\"br\",null),r.a.createElement(H,{onPriceChanged:this.onPriceChanged.bind(this,\"cer\"),label:\"explorer.asset.fee_pool.core_exchange_rate\",quote:\"1.3.0\",base:o}),r.a.createElement(\"br\",null),r.a.createElement(H,{onPriceChanged:this.onPriceChanged.bind(this,\"feedPrice\"),label:\"explorer.asset.price_feed.feed_price\",quote:i,base:o}),r.a.createElement(\"br\",null),r.a.createElement(A.a,{label:\"explorer.asset.price_feed.maintenance_collateral_ratio\",amount:a,onChange:this.onSetRatio.bind(this,\"mcr\"),placeholder:\"0.0\",style:{width:\"100%\",paddingRight:\"10px\"}}),r.a.createElement(\"br\",null),r.a.createElement(A.a,{label:\"explorer.asset.price_feed.maximum_short_squeeze_ratio\",amount:n,onChange:this.onSetRatio.bind(this,\"mssr\"),placeholder:\"0.0\",style:{width:\"100%\",paddingRight:\"10px\"}}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\",{disabled:!1}),onClick:this.onSubmit.bind(this)},r.a.createElement(l.a,{content:\"transaction.trxTypes.asset_publish_feed\"}))))}}]),t}();X.propTypes={account:z.a.ChainAccount.isRequired},X=Object(M.a)(X);var Y=X=Object(u.a)(X),$=a(4),ee=a(593),te=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ae=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={globalSettlementPrice:null,customPrice:!1},e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),te(t,[{key:\"shouldComponentUpdate\",value:function(e,t){return e.asset.id!==this.props.asset.id||t.globalSettlementPrice!==this.state.globalSettlementPrice||t.customPrice!==this.state.customPrice}},{key:\"onPriceChanged\",value:function(e){2!=e||this.state.customPrice?this.setState({globalSettlementPrice:e}):this.setState({globalSettlementPrice:1,customPrice:!0})}},{key:\"onPriceChangedObject\",value:function(e){this.onPriceChanged(e.toReal())}},{key:\"onSubmit\",value:function(){var e=this,t=this.props,a=t.asset,n=t.account,r=new w.a({real:1,asset_id:this.props.asset.id,precision:this.props.asset.precision}),s=v.ChainStore.getAsset(a.bitasset.options.short_backing_asset),o=new w.a({real:this.state.globalSettlementPrice,asset_id:this.props.asset.bitasset.options.short_backing_asset,precision:s.get(\"precision\")}),l=new w.i({quote:o,base:r});j.a.assetGlobalSettle(a,n.get(\"id\"),l).then(function(){e.onReset()})}},{key:\"onReset\",value:function(){this.setState({globalSettlementPrice:null,customPrice:!1})}},{key:\"onChange\",value:function(e){var t=e.amount;this.onPriceChanged(t)}},{key:\"onChangeRadio\",value:function(e){this.onPriceChanged(e.target.value)}},{key:\"render\",value:function(){var e=this.props.asset,t=v.ChainStore.getAsset(e.bitasset.options.short_backing_asset),a=_.a.parseDescription(e.options.description);return r.a.createElement(\"div\",null,r.a.createElement($.Form,{style:{paddingBottom:\"1rem\"},className:\"full-width\",layout:\"vertical\"},r.a.createElement(\"div\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_prediction\"),placement:\"topLeft\"},r.a.createElement(l.a,{content:\"explorer.asset.prediction_market_asset.prediction\"}),\": \",r.a.createElement(\"p\",null,a.condition))),r.a.createElement(\"div\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_resolution_date\"),placement:\"topLeft\"},r.a.createElement(l.a,{content:\"explorer.asset.prediction_market_asset.resolution_date\"}),\": \",r.a.createElement(\"p\",null,a.expiry))),r.a.createElement($.Radio.Group,{onChange:this.onChangeRadio.bind(this),value:this.state.globalSettlementPrice},r.a.createElement($.Radio,{value:1,disabled:!!this.state.customPrice||void 0},r.a.createElement(l.a,{content:\"boolean.true\"})),r.a.createElement($.Radio,{value:0,disabled:!!this.state.customPrice||void 0},r.a.createElement(l.a,{content:\"boolean.false\"})),r.a.createElement($.Radio,{value:this.state.customPrice?this.state.globalSettlementPrice:2},r.a.createElement(l.a,{content:\"settings.custom\"}))),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(ee.a,{disabled:!this.state.customPrice||void 0,label:\"explorer.asset.price_feed.global_settlement_price\",amount:this.state.globalSettlementPrice,onChange:this.onChange.bind(this),asset:t.get(\"id\"),base:e.symbol,isPrice:!0,assets:[t.get(\"id\")],placeholder:\"0.0\",style:{width:\"100%\"}}),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement($.Button,{type:\"primary\",disabled:null==this.state.globalSettlementPrice||void 0,onClick:this.onSubmit.bind(this)},r.a.createElement(l.a,{content:\"account.perm.publish_prediction\"})),r.a.createElement($.Button,{style:{marginLeft:\"8px\"},onClick:this.onReset.bind(this)},r.a.createElement(l.a,{content:\"account.perm.reset\"})))))}}]),t}();ae.propTypes={account:z.a.ChainAccount.isRequired};var ne=ae=Object(M.a)(ae),re=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var se=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initialState=function(){return{account:v.ChainStore.getAccount(a.props.funderAccountName),collateralAmount:\"0\",debtAmount:\"0\"}},a.state=a.initialState(),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),re(t,[{key:\"reset\",value:function(){this.setState(this.initialState())}},{key:\"_collateralBidInput\",value:function(e){this.setState({collateralAmount:e.amount})}},{key:\"_debtBidInput\",value:function(e){this.setState({debtAmount:e.amount})}},{key:\"_onBidCollateral\",value:function(){var e=this,t=this.state,a=t.collateralAmount,n=t.debtAmount;a=0==a?a:a.replace(/,/g,\"\"),n=0==n?n:n.replace(/,/g,\"\"),j.a.bidCollateral(this.state.account?this.state.account.get(\"id\"):null,this.props.core,this.props.asset,a,n),setTimeout(function(){e.props.onUpdate()},6e3)}},{key:\"removeBid\",value:function(){var e=this;j.a.bidCollateral(this.state.account?this.state.account.get(\"id\"):null,this.props.core,this.props.asset,0,0),setTimeout(function(){e.props.onUpdate()},6e3)}},{key:\"renderCollateralBid\",value:function(){var e=this.props,t=e.asset,a=e.core,n=this.state,s=n.account,o=n.collateralAmount,i=n.debtAmount,c=1,u=0,d=s?s.getIn([\"balances\",a.get(\"id\")]):null;if(d){var h=v.ChainStore.getObject(d);h&&(u=h.get(\"balance\"))}var f=r.a.createElement(\"span\",null,r.a.createElement(l.a,{component:\"span\",content:\"transfer.available\"}),\": \",r.a.createElement(p.a,{amount:u,asset:a.get(\"id\")}));return r.a.createElement(\"div\",null,r.a.createElement(A.a,{label:\"transaction.collateral\",display_balance:f,amount:o,onChange:this._collateralBidInput.bind(this),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:c++,style:{width:\"100%\",paddingTop:16}}),r.a.createElement(A.a,{label:\"transaction.borrow_amount\",amount:i,onChange:this._debtBidInput.bind(this),asset:t.get(\"id\"),assets:[t.get(\"id\")],placeholder:\"0.0\",tabIndex:c++,style:{width:\"100%\",paddingTop:16}}),\"0\"!==this.state.collateralAmount&&\"0\"!==this.state.debtAmount&&r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"}},r.a.createElement(l.a,{content:\"explorer.asset.collateral.bid_price\"}),\" \",r.a.createElement(m.a,{base_amount:this.state.collateralAmount/1,base_asset:a.get(\"id\"),quote_amount:this.state.debtAmount/1,quote_asset:t.get(\"id\"),noPopOver:!0,ignorePriceFeed:!0})),r.a.createElement(\"div\",{style:{paddingTop:\"1rem\"},className:\"button-group\"},r.a.createElement(\"button\",{className:C()(\"button\"),onClick:this._onBidCollateral.bind(this),tabIndex:c++},r.a.createElement(l.a,{content:\"transaction.trxTypes.bid_collateral\"})),r.a.createElement(\"button\",{className:\"button outline\",onClick:this.reset.bind(this),tabIndex:c++},r.a.createElement(l.a,{content:\"account.perm.reset\"}))))}},{key:\"render\",value:function(){return this.renderCollateralBid()}}]),t}(),oe=se=Object(u.a)(se,{propNames:[\"asset\",\"core\"],withDynamic:!0}),le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ie=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ue(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function pe(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function me(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var de=$.Collapse.Panel,he=function(e){function t(){return ue(this,t),pe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return me(t,r.a.Component),ie(t,[{key:\"render\",value:function(){var e=this.props,t=e.isSet,a=e.name;return t?r.a.createElement(\"span\",{className:\"asset-flag\"},r.a.createElement(\"span\",{className:\"label info\"},r.a.createElement(l.a,{content:\"account.user_issued_assets.\"+a}))):r.a.createElement(\"span\",null)}}]),t}(),fe=function(e){function t(){return ue(this,t),pe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return me(t,r.a.Component),ie(t,[{key:\"render\",value:function(){var e=this.props,t=e.isSet,a=e.name;return t?r.a.createElement(\"span\",{className:\"asset-flag\"},r.a.createElement(\"span\",{className:\"label info\"},r.a.createElement(l.a,{content:\"account.user_issued_assets.\"+a}))):r.a.createElement(\"span\",null)}}]),t}(),be=function(e){function t(e){ue(this,t);var a=pe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={callOrders:[],collateralBids:[],marginTableSort:\"ratio\",collateralTableSort:\"price\",sortDirection:!0,showCollateralBidInInfo:!1,cumulativeGrouping:!1,activeFeedTab:\"margin\",activeAssetTab:\"info\"},a}return me(t,r.a.Component),ie(t,[{key:\"componentWillMount\",value:function(){this._getMarginCollateral()}},{key:\"updateOnCollateralBid\",value:function(){this._getMarginCollateral()}},{key:\"_getMarginCollateral\",value:function(){var e=this;if(this.props.asset.has(\"bitasset\")){var t,a=(ce(t={},this.props.asset.get(\"id\"),this.props.asset.toJS()),ce(t,this.props.backingAsset.get(\"id\"),this.props.backingAsset.toJS()),t),n=this.props.asset.getIn([\"bitasset\",\"is_prediction_market\"],!1),r=this._getFeedPrice();if(r){try{var s=this.props.asset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"]);k.Apis.instance().db_api().exec(\"get_call_orders\",[this.props.asset.get(\"id\"),300]).then(function(t){var o=t.map(function(t){return new w.b(t,a,e.props.asset.get(\"id\"),r,s,n)});e.setState({callOrders:o})})}catch(e){}try{k.Apis.instance().db_api().exec(\"get_collateral_bids\",[this.props.asset.get(\"id\"),100,0]).then(function(t){var n=t.map(function(t){return new w.c(t,a,e.props.asset.get(\"id\"),r)});e.setState({collateralBids:n})})}catch(e){console.log(\"get_collateral_bids Error: \",e)}}}}},{key:\"_getFeedPrice\",value:function(){var e,t=(ce(e={},this.props.asset.get(\"id\"),this.props.asset.toJS()),ce(e,this.props.backingAsset.get(\"id\"),this.props.backingAsset.toJS()),e),a=this.props.asset.getIn([\"bitasset\",\"is_prediction_market\"],!1),n=this.props.asset.getIn([\"bitasset\",\"current_feed\",\"maximum_short_squeeze_ratio\"]),r=_.a.extractRawFeedPrice(this.props.asset);if(0==r.getIn([\"base\",\"amount\"])&&0==r.getIn([\"quote\",\"amount\"]))return null;if((a&&r.getIn([\"base\",\"asset_id\"])===r.getIn([\"quote\",\"asset_id\"])&&(t[this.props.backingAsset.get(\"id\")]||(t[this.props.backingAsset.get(\"id\")]={precision:this.props.asset.get(\"precision\")}),r=(r=(r=(r=r.setIn([\"base\",\"amount\"],1)).setIn([\"base\",\"asset_id\"],this.props.backingAsset.get(\"id\"))).setIn([\"quote\",\"amount\"],1)).setIn([\"quote\",\"asset_id\"],this.props.asset.get(\"id\")),n=1e3),r.toJS)&&!t[r.toJS().base.asset_id])return;return new w.d({priceObject:r,market_base:this.props.asset.get(\"id\"),sqr:n,assets:t})}},{key:\"_toggleCumulativeGrouping\",value:function(){this.setState({cumulativeGrouping:!this.state.cumulativeGrouping})}},{key:\"_assetType\",value:function(e){return\"bitasset\"in e?e.bitasset.is_prediction_market?\"Prediction\":\"Smart\":\"Simple\"}},{key:\"formattedPrice\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(\"number\"==typeof e&&isNaN(e))return\"-\";var o=e.base,l=e.quote;return r.a.createElement(m.a,{base_amount:o.amount,base_asset:o.asset_id,quote_amount:l.amount,quote_asset:l.asset_id,hide_value:a,hide_symbols:t,factor:n,negative_invert:s})}},{key:\"renderFlagIndicators\",value:function(e,t){return r.a.createElement(\"div\",null,t.map(function(t){return r.a.createElement(he,{key:\"flag_\"+t,name:t,isSet:e[t]})}))}},{key:\"renderPermissionIndicators\",value:function(e,t){return r.a.createElement(\"div\",null,t.map(function(t){return r.a.createElement(fe,{key:\"perm_\"+t,name:t,isSet:e[t]})}))}},{key:\"renderAuthorityList\",value:function(e){return e.map(function(e){return r.a.createElement(\"span\",{key:e},r.a.createElement(i.a,{account:e}),\" \")})}},{key:\"renderMarketList\",value:function(e,t){var a=e.symbol;return t.map(function(e){if(e==a)return null;var t=e+\"_\"+a,n=e+\"/\"+a;return r.a.createElement(\"span\",{key:t},r.a.createElement(s.a,{to:\"/market/\"+t},n),\" \")}.bind(this))}},{key:\"renderAboutBox\",value:function(e,t){var a=v.ChainStore.getObject(e.issuer,!1,!1),n=a?a.get(\"name\"):\"\",o=_.a.parseDescription(e.options.description),i=o.main,c=o.short_name?o.short_name:null,u=(i=i&&i.length>0?i+\" \":i).match(/(http?):\\/\\/(www\\.)?[a-z0-9\\.:].*?(?=\\s)/g),p=this.props.coreAsset.get(\"symbol\"),m=o.market?o.market:p;e.bitasset&&(m=(m=v.ChainStore.getAsset(e.bitasset.options.short_backing_asset))&&m.get?m.get(\"symbol\"):p),e.symbol===p&&(m=\"USD\"),u&&u.length&&u.forEach(function(e){var t='<a target=\"_blank\" class=\"external-link\" rel=\"noopener noreferrer\" href=\"'+e+'\">'+e+\"</a>\";i=i.replace(e,t)});var h=g.a.replaceName(t),f=h.name,E=h.prefix;return r.a.createElement(\"div\",{style:{overflow:\"visible\"}},r.a.createElement(\"h2\",null,r.a.createElement(d.a,{maxWidth:50,replaceNoneToBts:!1,name:e.symbol}),c?r.a.createElement(\"span\",{style:{marginRight:15}},c):null,r.a.createElement(s.a,{className:\"button market-button\",to:\"/market/\"+e.symbol+\"_\"+m},r.a.createElement(l.a,{content:\"exchange.market\"}))),r.a.createElement(b.a,{path:\"assets/\"+e.symbol,alt_path:\"assets/Asset\",section:\"summary\",symbol:(E||\"\")+f,description:i,issuer:n,hide_issuer:\"true\"}))}},{key:\"renderSummary\",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);t&&(t=t.toJS());var a=e.options,n=_.a.getFlagBooleans(e.options.flags,this.props.asset.has(\"bitasset_data_id\")),s=Object.keys(n),o=\"bitasset\"in e&&e.bitasset.is_prediction_market,u=null;if(o){var m=_.a.parseDescription(e.options.description);u=r.a.createElement(r.a.Fragment,null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_prediction\")},r.a.createElement(l.a,{content:\"explorer.asset.prediction_market_asset.prediction\"}))),r.a.createElement(\"td\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_prediction\")},m.condition))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_resolution_date\")},r.a.createElement(l.a,{content:\"explorer.asset.prediction_market_asset.resolution_date\"}))),r.a.createElement(\"td\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.prediction_market_asset.tooltip_resolution_date\")},m.expiry))))}var d=t?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.summary.current_supply\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{amount:t.current_supply,asset:e.id}))):null,f=t?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.summary.stealth_supply\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{amount:t.confidential_supply,asset:e.id}))):null,b=n.charge_market_fee?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.summary.market_fee\"})),r.a.createElement(\"td\",null,\" \",a.market_fee_percent/100,\" % \")):null,g=n.charge_market_fee&&a.extensions&&a.extensions.reward_percent>=0?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement($.Tooltip,{title:L.a.translate(\"account.user_issued_assets.reward_percent_tooltip\")},r.a.createElement(l.a,{content:\"explorer.asset.summary.market_fee_referral_reward_percent\"}),\" \",r.a.createElement($.Icon,{type:\"question-circle\",theme:\"filled\"}))),r.a.createElement(\"td\",null,\" \",a.extensions.reward_percent/100,\" %\")):null;return r.a.createElement(\"div\",{className:\"asset-card no-padding\"},r.a.createElement(\"div\",{className:\"card-divider\"},r.a.createElement(h.a,{name:e.symbol})),r.a.createElement(\"table\",{className:\"table key-value-table table-hover\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.summary.asset_type\"})),r.a.createElement(\"td\",null,\" \",this._assetType(e),\" \")),o&&u,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.summary.issuer\"})),r.a.createElement(\"td\",null,r.a.createElement(i.a,{account:e.issuer}))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.assets.precision\"})),r.a.createElement(\"td\",null,\" \",e.precision,\" \")),e.bitasset?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.assets.backing_asset\"})),r.a.createElement(\"td\",null,r.a.createElement(c.a,{asset:e.bitasset.options.short_backing_asset}))):null,d,f,b,g)),r.a.createElement(\"br\",null),this.renderFlagIndicators(n,s))}},{key:\"renderPriceFeed\",value:function(e){var t=e.bitasset;if(!(\"current_feed\"in t))return r.a.createElement(\"div\",{header:s});var a=t.current_feed,n=this.formattedPrice(_.a.extractRawFeedPrice(e)),s=r.a.createElement(\"div\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.title\"}),r.a.createElement(\"span\",{className:\"float-right\"},n));return r.a.createElement(de,{header:s},r.a.createElement(\"table\",{className:\"table key-value-table table-hover\",style:{padding:\"1.2rem\"}},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.external_feed_price\"})),r.a.createElement(\"td\",null,n)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.feed_lifetime\"})),r.a.createElement(\"td\",null,t.options.feed_lifetime_sec/60/60)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.min_feeds\"})),r.a.createElement(\"td\",null,t.options.minimum_feeds)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.maintenance_collateral_ratio\"})),r.a.createElement(\"td\",null,a.maintenance_collateral_ratio/1e3)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.maximum_short_squeeze_ratio\"})),r.a.createElement(\"td\",null,a.maximum_short_squeeze_ratio/1e3)))))}},{key:\"_analyzeBids\",value:function(e){var t=e,a=0,n=0;return this.state.collateralBids.sort(function(e,t){return t.bid.toReal()-e.bid.toReal()}).forEach(function(e){var r=e.collateral,s=e.debt;n<t?(n+s>=t?(r=(s=t-n)/e.debt*r,e.consideredIfRevived=2):e.consideredIfRevived=1,a+=r,n+=s):e.consideredIfRevived=0}),{collateral:a,debt:n}}},{key:\"renderSettlement\",value:function(e){var t=this,a=e.bitasset;if(!(\"current_feed\"in a))return r.a.createElement(\"div\",{header:I});var n=this.props.getDynamicObject(e.dynamic_asset_data_id);n&&(n=n.toJS());var s=n?n.current_supply:0,o=a.current_feed,i=e.bitasset.settlement_fund>0,c=null,u=null,d=null;if(i){var h,f=a.settlement_fund,b=this.formattedPrice(a.settlement_price),g=this.formattedPrice(a.settlement_price,!1,!1,o.maintenance_collateral_ratio/1e3,!0),E=(ce(h={},this.props.asset.get(\"id\"),this.props.asset.toJS()),ce(h,this.props.backingAsset.get(\"id\"),this.props.backingAsset.toJS()),h),v=s,k=a.settlement_fund,w=this._analyzeBids(v);d=r.a.createElement(m.a,{base_amount:a.settlement_fund/1+w.collateral,base_asset:E[a.options.short_backing_asset].id,quote_amount:w.debt,quote_asset:e.id,hide_value:!1,hide_symbols:!1,factor:o.maintenance_collateral_ratio/1e3,negative_invert:!0}),v/=Math.pow(10,e.precision),k/=Math.pow(10,E[a.options.short_backing_asset].precision);var x=w.collateral/Math.pow(10,E[a.options.short_backing_asset].precision),P=this._getFeedPrice();P&&(c=k/P.toReal()/v,u=(k+x)/P.toReal()/v)}else var C=this.getGlobalSettlementPrice(),O=this.getGlobalSettlementPrice(o.maximum_short_squeeze_ratio/1e3),A=a.force_settled_volume,j=a.options.force_settlement_offset_percent,S=a.options.force_settlement_delay_sec,T=a.options.maximum_force_settlement_volume,N=this.formattedPrice(_.a.extractRawFeedPrice(e),!1,!1,o.maximum_short_squeeze_ratio/1e3),F=this.formattedPrice(_.a.extractRawFeedPrice(e),!1,!1,1-j/1e4);var I=r.a.createElement(\"div\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.title\"}),r.a.createElement(\"span\",{className:\"float-right\"},i?b:F));return r.a.createElement(de,{header:I},i&&r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.settlement.gs_description\"}),i&&r.a.createElement(\"p\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_revive\"}),\" (\",r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_see_actions\"}),\",  \",r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_or\"}),\" \",r.a.createElement(\"a\",{onClick:function(){t.setState({showCollateralBidInInfo:!t.state.showCollateralBidInInfo})}},r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_place_bid\"})),\").\"),r.a.createElement(\"table\",{className:\"table key-value-table table-hover\",style:{padding:\"1.2rem\"}},i?r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.settlement_price\"})),r.a.createElement(\"td\",null,b)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.settlement_funds\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{asset:a.options.short_backing_asset,amount:f}))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.settlement_funds_collateral_ratio\"})),r.a.createElement(\"td\",null,c?c.toFixed(6):\"-\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,\" \"),r.a.createElement(\"td\",null,\" \")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{style:{fontWeight:\"bold\"},content:\"explorer.asset.settlement.gs_revert\"})),r.a.createElement(\"td\",null,\" \")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_auto_revive_price\"})),r.a.createElement(\"td\",null,g,\" / \",d)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.gs_collateral_valuation\",mcr:o.maintenance_collateral_ratio/1e3})),r.a.createElement(\"td\",null,u?u.toFixed(6):\"-\"))):r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.maximum_short_squeeze_price\"})),r.a.createElement(\"td\",null,N)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.global_settlement_trigger\"})),r.a.createElement(\"td\",null,O||\"-\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed.global_settlement_price\"})),r.a.createElement(\"td\",null,C||\"-\")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,\" \"),r.a.createElement(\"td\",null,\" \")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{style:{fontWeight:\"bold\"},content:\"explorer.asset.settlement.force_settlement\"})),r.a.createElement(\"td\",null,\" \")),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.price\"}),\"  (\",j/100,\"%\",\" \",r.a.createElement(l.a,{content:\"explorer.asset.settlement.offset\"}),\")\"),r.a.createElement(\"td\",null,F)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.delay\"})),r.a.createElement(\"td\",null,r.a.createElement(y,{time:S}))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.max_settle_volume\"}),\" (\",T/100,\"%)\"),r.a.createElement(\"td\",null,r.a.createElement(p.a,{asset:e.id,amount:s*(T/1e4)}))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.current_settled\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{asset:e.id,amount:A}))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.settlement.settle_remaining_volume\"})),r.a.createElement(\"td\",null,0==A?100:Math.round(100-A/(s*(T/1e4))*100,2),\"%\")))))}},{key:\"renderFeePool\",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);t&&(t=t.toJS());var a=e.options,n=this.props.coreAsset;return r.a.createElement(de,{header:r.a.createElement(\"div\",null,r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.title\"}),t?r.a.createElement(\"span\",{className:\"float-right\"},r.a.createElement(p.a,{asset:\"1.3.0\",amount:t.fee_pool})):null)},r.a.createElement(\"div\",null,r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.fee_pool.pool_text\",unsafe:!0,asset:e.symbol,core:n.get(\"symbol\")}),r.a.createElement(\"table\",{className:\"table key-value-table\",style:{padding:\"1.2rem\"}},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.core_exchange_rate\"})),r.a.createElement(\"td\",null,this.formattedPrice(a.core_exchange_rate))),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.pool_balance\"})),r.a.createElement(\"td\",null,t?r.a.createElement(p.a,{asset:\"1.3.0\",amount:t.fee_pool}):null)),r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.unclaimed_issuer_income\"})),r.a.createElement(\"td\",null,t?r.a.createElement(p.a,{asset:e.id,amount:t.accumulated_fees}):null))))))}},{key:\"renderAssetOwnerUpdate\",value:function(e){return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"account.user_issued_assets.update_owner\"})},r.a.createElement(l.a,{component:\"p\",content:\"account.user_issued_assets.update_owner_text\",asset:e.symbol}),r.a.createElement(U,{asset:e,account:this.props.currentAccount,currentOwner:e.issuer}))}},{key:\"renderFeedPublish\",value:function(e){return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"transaction.trxTypes.asset_publish_feed\"})},r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.feed_producer_text\"}),r.a.createElement(Y,{asset:e.id,account:this.props.currentAccount,currentOwner:e.issuer}))}},{key:\"renderCollateralBid\",value:function(e){return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"explorer.asset.collateral.bid\"})},r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.collateral.bid_text\",asset:e.symbol}),r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.settlement.gs_included_on_revival\"}),r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.collateral.remove_bid\"}),r.a.createElement(oe,{asset:e.symbol,core:e.bitasset.options.short_backing_asset,funderAccountName:this.props.currentAccount,onUpdate:this.updateOnCollateralBid.bind(this),hideBalance:!0}))}},{key:\"renderFeePoolFunding\",value:function(e){return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.fund\"})},r.a.createElement(l.a,{component:\"p\",content:\"explorer.asset.fee_pool.fund_text\",asset:e.symbol}),r.a.createElement(R,{asset:e.symbol,funderAccountName:this.props.currentAccount,hideBalance:!0}))}},{key:\"renderFeePoolClaiming\",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);return t&&(t=t.toJS()),r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"explorer.asset.fee_pool.claim_balance\"})},r.a.createElement(R,{asset:e.symbol,funderAccountName:this.props.currentAccount,dynamic:t,hideBalance:!0,type:\"claim\"}))}},{key:\"renderFeesClaiming\",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);return t&&(t=t.toJS()),r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"transaction.trxTypes.asset_claim_fees\"})},r.a.createElement(R,{asset:e.symbol,dynamic:t,funderAccountName:this.props.currentAccount,hideBalance:!0,type:\"claim_fees\"}))}},{key:\"renderPermissions\",value:function(e){var t=e.options,a=_.a.getFlagBooleans(e.options.issuer_permissions,this.props.asset.has(\"bitasset_data_id\")),n=Object.keys(a),s=a.charge_market_fee?r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.permissions.max_market_fee\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{amount:+t.max_market_fee,asset:e.id}))):null,o=r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(l.a,{content:\"explorer.asset.permissions.max_supply\"})),r.a.createElement(\"td\",null,r.a.createElement(p.a,{amount:+t.max_supply,asset:e.id}))),i=a.white_list?r.a.createElement(\"div\",null,r.a.createElement(\"br\",null),!!t.blacklist_authorities&&!!t.blacklist_authorities.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{content:\"explorer.asset.permissions.blacklist_authorities\"}),\":  \",this.renderAuthorityList(t.blacklist_authorities)),!!t.blacklist_markets&&!!t.blacklist_markets.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"br\",null),r.a.createElement(l.a,{content:\"explorer.asset.permissions.blacklist_markets\"}),\":  \",this.renderMarketList(e,t.blacklist_markets)),!!t.whitelist_authorities&&!!t.whitelist_authorities.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"br\",null),r.a.createElement(l.a,{content:\"explorer.asset.permissions.whitelist_authorities\"}),\":  \",this.renderAuthorityList(t.whitelist_authorities)),!!t.whitelist_markets&&!!t.whitelist_markets.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"br\",null),r.a.createElement(l.a,{content:\"explorer.asset.permissions.whitelist_markets\"}),\":  \",this.renderMarketList(e,t.whitelist_markets))):null,c=e.options.extensions.whitelist_market_fee_sharing&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"br\",null),r.a.createElement(l.a,{content:\"explorer.asset.permissions.accounts_in_whitelist_market_fee_sharing\"}),\":  \",this.renderAuthorityList(e.options.extensions.whitelist_market_fee_sharing));return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"explorer.asset.permissions.title\"})},r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table key-value-table table-hover\",style:{padding:\"1.2rem\"}},r.a.createElement(\"tbody\",null,s,o)),r.a.createElement(\"br\",null),this.renderPermissionIndicators(a,n),r.a.createElement(\"br\",null),i,c))}},{key:\"getGlobalSettlementPrice\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.state.callOrders)return null;for(var t=null,a=null,n=this.state.callOrders.length,s=0;s<n;s++){var o=this.state.callOrders[s];null==t?(t=o,a=o.getRatio()):o.getRatio()<a&&(a=o.getRatio(),t=o)}if(null==t)return null;var l=t.debt*e,i=t.collateral;return r.a.createElement(m.a,{base_amount:i,base_asset:t.call_price.base.asset_id,quote_amount:l,quote_asset:t.call_price.quote.asset_id})}},{key:\"_renderFeedTable\",value:function(e){var t=this,a=e.bitasset;if(!(\"feeds\"in a)||0==a.feeds.length||a.is_prediction_market||!a.feeds.length)return null;var n=a.feeds,s=_.a.extractRawFeedPrice(n[0][1][1]),o=n[0][1][1].core_exchange_rate,c=(new Date).getTime(),u=new Date(c-1e3*e.bitasset.options.feed_lifetime_sec);n=n.filter(function(e){return new Date(e[1][0])>u}).sort(function(e,t){return new Date(t[1][0])-new Date(e[1][0])});var p,m=_.a.extractRawFeedPrice(e),d=m.base.amount/m.quote.amount,h=[];p=[{key:\"publisher\",fixed:\"left\",width:150,title:r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.publisher\"}),dataIndex:\"publisher\",sorter:function(e,t){var a=v.ChainStore.getAccount(e.publisher,!1);a&&(a=a.get(\"name\"));var n=v.ChainStore.getAccount(t.publisher,!1);return n&&(n=n.get(\"name\")),a>n?1:a<n?-1:0},render:function(e){return r.a.createElement(i.a,{account:e})}},{key:\"feed_price\",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.feed_price\"}),\" \",\"(\",this.formattedPrice(s,!1,!0),\")\"),dataIndex:\"feed_price\",sorter:function(e,t){var a=parseFloat(e.feed_price.base.amount/e.feed_price.quote.amount),n=parseFloat(t.feed_price.base.amount/t.feed_price.quote.amount);return a>n?1:a<n?-1:0},render:function(e){var a=(parseFloat(e.base.amount/e.quote.amount)/d*100-100).toFixed(2);return r.a.createElement(r.a.Fragment,null,t.formattedPrice(e,!0),\"(\",r.a.createElement(\"span\",{className:a>0?\"txtlabel success\":a<0?\"txtlabel warning\":\"txtlabel\"},a,\"%\"),\")\")}},{key:\"core_exchange_rate\",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.core_exchange_rate\"}),\" \",\"(\",this.formattedPrice(o,!1,!0),\")\"),dataIndex:\"core_exchange_rate\",render:function(e){return t.formattedPrice(e,!0)}},{key:\"maintenance_collateral_ratio\",title:r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.maintenance_collateral_ratio\"}),dataIndex:\"maintenance_collateral_ratio\",render:function(e){return e}},{key:\"maximum_short_squeeze_ratio\",title:r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.maximum_short_squeeze_ratio\"}),dataIndex:\"maximum_short_squeeze_ratio\",render:function(e){return e}},{key:\"publishDate\",fixed:\"right\",width:150,title:r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.published\"}),dataIndex:\"publishDate\",sorter:function(e,t){return e.publishDate.getTime()>t.publishDate.getTime()?1:e.publishDate.getTime()<t.publishDate.getTime()?-1:0},render:function(e){return r.a.createElement(f.a,{time:e})}}];for(var b=0;b<n.length;b++){var g=n[b],E=g[0],y=new Date(g[1][0]+\"Z\"),k=_.a.extractRawFeedPrice(g[1][1]),w=g[1][1].core_exchange_rate,x=\"\"+g[1][1].maintenance_collateral_ratio/1e3,P=\"\"+g[1][1].maximum_short_squeeze_ratio/1e3;h.push({publisher:E,feed_price:k,core_exchange_rate:w,maintenance_collateral_ratio:x,maximum_short_squeeze_ratio:P,publishDate:y})}return r.a.createElement($.Table,{style:{width:\"100%\"},rowKey:\"feedPublisher\",columns:p,dataSource:h,pagination:!1,locale:{emptyText:r.a.createElement(l.a,{content:\"explorer.asset.price_feed_data.empty\"})}})}},{key:\"_renderMarginTable\",value:function(){var e=this,t=this.state.cumulativeGrouping,a=[],n=[];if(this.state.callOrders&&this.state.callOrders.length>0){var s=t?r.a.createElement(\"span\",null,\" (\",r.a.createElement(l.a,{content:\"explorer.asset.cumulative\"}),\")\"):r.a.createElement(\"span\",null,\"      \"),o=0,c=0;this.state.callOrders.map(function(e){o+=e.debt,c+=e.collateral,n.push({borrower:e.borrower,collateral:{amount:t?c:e.collateral,asset:e.getCollateral().asset_id},debt:{amount:t?o:e.debt,asset:e.amountToReceive().asset_id},call:e.call_price,tcr:e.order.target_collateral_ratio,cr:{ratio:e.getRatio(),status:e.getStatus()}})});var u=function(t){var a=n[0][t];return n.length?r.a.createElement(\"span\",null,r.a.createElement(\"br\",null),a.base?e.formattedPrice(a,!1,!0):r.a.createElement(p.a,{asset:a.asset,amount:a.amount,hide_amount:!0})):null};a=[{key:\"borrower\",fixed:\"left\",width:200,title:r.a.createElement(l.a,{content:\"transaction.borrower\"}),dataIndex:\"borrower\",sorter:function(e,t){var a=v.ChainStore.getAccount(e.borrower,!1);a&&(a=a.get(\"name\"));var n=v.ChainStore.getAccount(t.borrower,!1);return n&&(n=n.get(\"name\")),a>n?1:a<n?-1:0},render:function(e){return r.a.createElement(i.a,{account:e})}},{key:\"collateral\",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{content:\"transaction.collateral\"}),s,u(\"collateral\")),dataIndex:\"collateral\",sorter:function(e,t){return e.collateral.amount>t.collateral.amount?1:e.collateral.amount<t.collateral.amount?-1:0},render:function(t){return r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.margin_positions.click_to_switch_to_cumulative\"),mouseEnterDelay:.5},r.a.createElement(\"span\",{onClick:e._toggleCumulativeGrouping.bind(e),style:{cursor:\"pointer\"}},r.a.createElement(p.a,{amount:t.amount,asset:t.asset,hide_asset:!0})))}},{key:\"debt\",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{content:\"transaction.borrow_amount\"}),s,u(\"debt\")),dataIndex:\"debt\",sorter:function(e,t){return e.debt.amount>t.debt.amount?1:e.debt.amount<t.debt.amount?-1:0},render:function(t){return r.a.createElement(\"div\",{onClick:e._toggleCumulativeGrouping.bind(e),style:{cursor:\"pointer\"}},r.a.createElement($.Tooltip,{title:L.a.translate(\"explorer.asset.margin_positions.click_to_switch_to_cumulative\"),mouseEnterDelay:.5},r.a.createElement(p.a,{amount:t.amount,asset:t.asset,hide_asset:!0})))}},{key:\"call\",title:r.a.createElement(\"span\",null,r.a.createElement(l.a,{content:\"exchange.call\"}),u(\"call\")),dataIndex:\"call\",render:function(t){return e.formattedPrice(t,!0,!1)}},{key:\"tcr\",title:r.a.createElement($.Tooltip,{title:L.a.translate(\"borrow.target_collateral_ratio_explanation\")},r.a.createElement(l.a,{content:\"borrow.target_collateral_ratio_short\"})),dataIndex:\"tcr\",render:function(e){return e?(e/1e3).toFixed(3):\"-\"}},{key:\"cr\",title:r.a.createElement(l.a,{content:\"borrow.coll_ratio\"}),dataIndex:\"cr\",fixed:\"right\",width:100,sorter:function(e,t){return e.cr.ratio>t.cr.ratio?1:e.cr.ratio<t.cr.ratio?-1:0},render:function(e){var t=\"margin-ratio \"+e.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{className:t},e.ratio.toFixed(3)))}}]}return r.a.createElement($.Table,{style:{width:\"100%\"},rowKey:\"feedMargins\",columns:a,dataSource:n,rowClassName:\"margin-row\",pagination:{pageSize:Number(25)},locale:{emptyText:r.a.createElement(l.a,{content:\"explorer.asset.margin_positions.empty\"})}})}},{key:\"_renderCollBidTable\",value:function(){var e,t=[];e=[{key:\"bidder\",title:r.a.createElement(l.a,{content:\"transaction.bidder\"}),dataIndex:\"bidder\",fixed:\"left\",width:200,render:function(e){return r.a.createElement(i.a,{account:e})}},{key:\"collateral\",title:r.a.createElement(l.a,{content:\"transaction.collateral\"}),dataIndex:\"collateral\",render:function(e){return r.a.createElement(p.a,{amount:e.amount,asset:e.asset_id,hide_asset:!0})}},{key:\"debt\",title:r.a.createElement(l.a,{content:\"transaction.borrow_amount\"}),dataIndex:\"debt\",render:function(e){return r.a.createElement(p.a,{amount:e.amount,asset:e.asset_id,hide_asset:!0})}},{key:\"debt_cum\",title:r.a.createElement(l.a,{content:\"transaction.cumulative_borrow_amount\"}),dataIndex:\"debt_cum\",render:function(e){return r.a.createElement(p.a,{amount:e.amount,asset:e.asset_id,hide_asset:!0})}},{key:\"price\",title:r.a.createElement(l.a,{content:\"explorer.asset.collateral_bid.bid\"}),dataIndex:\"price\",render:function(e){return r.a.createElement(m.a,{base_amount:e.base.amount,base_asset:e.base.asset_id,quote_amount:e.quote.amount,quote_asset:e.quote.asset_id,hide_symbols:!0})}},{key:\"cr\",title:r.a.createElement(l.a,{content:\"borrow.coll_ratio\"}),dataIndex:\"cr\",render:function(e){return e.toFixed(3)}},{key:\"included\",title:r.a.createElement(l.a,{content:\"borrow.considered_on_revival\"}),dataIndex:\"included\",render:function(e){return 2==e?r.a.createElement(l.a,{content:\"explorer.asset.collateral_bid.included.partial\"}):1==e?r.a.createElement(l.a,{content:\"explorer.asset.collateral_bid.included.yes\"}):r.a.createElement(l.a,{content:\"explorer.asset.collateral_bid.included.no\"})}}];var a=0;return this.state.collateralBids.map(function(e){a+=e.debt,t.push({bidder:e.bidder,collateral:{amount:e.bid.base.amount,asset:e.bid.base.asset_id},debt:{amount:e.bid.quote.amount,asset:e.bid.quote.asset_id},debt_cum:{amount:a,asset:e.bid.quote.asset_id},price:e.bid,cr:e.getRatio(),included:e.consideredIfRevived})}),r.a.createElement($.Table,{style:{width:\"100%\"},rowKey:\"feedCollBid\",columns:e,dataSource:t,pagination:{pageSize:Number(25)},locale:{emptyText:r.a.createElement(l.a,{content:\"explorer.asset.collateral_bid.empty\"})}})}},{key:\"_setFeedTab\",value:function(e){this.setState({activeFeedTab:e})}},{key:\"_setAssetTab\",value:function(e){this.setState({activeAssetTab:e})}},{key:\"renderFeedTables\",value:function(e){var t=e.bitasset;if(!(\"feeds\"in t)||0==t.feeds.length||t.is_prediction_market||!t.feeds.length)return null;var a=t.settlement_fund>0;return r.a.createElement($.Tabs,{onChange:this._setFeedTab.bind(this),activeKey:this.state.activeFeedTab},r.a.createElement($.Tabs.TabPane,{tab:L.a.translate(a?\"explorer.asset.collateral_bid.title\":\"explorer.asset.margin_positions.title\"),key:\"margin\"},\"margin\"==this.state.activeFeedTab?a?this._renderCollBidTable():this._renderMarginTable():null),r.a.createElement($.Tabs.TabPane,{tab:L.a.translate(\"explorer.asset.price_feed_data.title\"),key:\"feed\"},\"feed\"==this.state.activeFeedTab?this._renderFeedTable(e):null))}},{key:\"renderAssetResolvePrediction\",value:function(e){return r.a.createElement(de,{header:r.a.createElement(l.a,{content:\"account.user_issued_assets.resolve_prediction\"})},r.a.createElement(l.a,{component:\"p\",content:\"account.user_issued_assets.resolve_prediction_text\"}),r.a.createElement(ne,{asset:e,account:this.props.currentAccount}))}},{key:\"render\",value:function(){if(null===this.props.backingAsset)return r.a.createElement(x.a,{subtitle:\"asset_not_found_subtitle\"});if(!this.props.backingAsset.get||!this.props.coreAsset.get)return null;var e=this.props.asset.toJS(),t=\"bitasset\"in e?this.renderPriceFeed(e):null,a=\"bitasset\"in e?this.renderFeedTables(e):null;return r.a.createElement(\"div\",{className:\"grid-container asset-page\"},r.a.createElement(\"div\",{className:\"grid-block page-layout\"},r.a.createElement(\"div\",{className:\"grid-block main-content wrap\"},r.a.createElement(\"div\",{className:\"grid-block medium-up-1\",style:{width:\"100%\"}},this.renderAboutBox(e,this.props.asset)),r.a.createElement($.Tabs,{onChange:this._setAssetTab.bind(this),activeKey:this.state.activeAssetTab,className:\"grid-block vertical\"},r.a.createElement($.Tabs.TabPane,{tab:L.a.translate(\"explorer.asset.info\"),key:\"info\"},r.a.createElement(\"div\",{className:\"grid-block vertical large-horizontal medium-up-1 large-up-2\",style:{paddingTop:\"1rem\"}},r.a.createElement(\"div\",{className:\"grid-content small-no-padding\"},this.renderSummary(e)),r.a.createElement(\"div\",null,r.a.createElement($.Collapse,{className:\"asset-collapse\"},this.renderPermissions(e),this.renderFeePool(e),t?this.renderPriceFeed(e):null,t?this.renderSettlement(e):null,this.state.showCollateralBidInInfo?this.renderCollateralBid(e):null))),a||null),r.a.createElement($.Tabs.TabPane,{tab:L.a.translate(\"explorer.asset.actions\"),key:\"actions\"},r.a.createElement($.Collapse,{className:\"asset-collapse\"},this.renderFeePoolFunding(e),this.renderFeePoolClaiming(e),this.renderFeesClaiming(e),this.renderAssetOwnerUpdate(e),\"bitasset\"in e&&!e.bitasset.is_prediction_market&&this.renderFeedPublish(e),this.state.collateralBids.length>0&&this.renderCollateralBid(e),\"bitasset\"in e&&e.bitasset.is_prediction_market&&this.renderAssetResolvePrediction(e)))))))}}]),t}();be=Object(B.a)(be,{listenTo:function(){return[q.a]},getProps:function(){return{currentAccount:q.a.getState().currentAccount||q.a.getState().passwordAccount}}}),be=Object(u.a)(be,{propNames:[\"backingAsset\",\"coreAsset\"]});var _e=function(e){function t(){return ue(this,t),pe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return me(t,r.a.Component),ie(t,[{key:\"render\",value:function(){if(null===this.props.asset)return r.a.createElement(x.a,{subtitle:\"asset_not_found_subtitle\"});if(!this.props.asset.get)return null;var e=this.props.asset.has(\"bitasset\")?this.props.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]):\"1.3.0\";return r.a.createElement(be,le({},this.props,{backingAsset:e,coreAsset:\"1.3.0\"}))}}]),t}();_e=Object(u.a)(_e,{withDynamic:!0});var ge=function(e){function t(){return ue(this,t),pe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return me(t,r.a.Component),ie(t,[{key:\"render\",value:function(){var e=this.props.match.params.symbol.toUpperCase();return r.a.createElement(_e,le({},this.props,{asset:e}))}}]),t}();t.default=ge}}]);"],"mappings":"AAAA","sourceRoot":""}